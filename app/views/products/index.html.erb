<%= render "products/search/index" %>

  <!-- title bar -->
  <%= content_for :title_bar do %>
    <div class="row">
      <div class="small-12 medium-9 columns">
        <h1>Produkte</h1>
      </div>
    </div>

  <% end %>



  <!-- content -->
  <% if @tags %>
    <section>
      <div class="panel">
        Aktive Filter:
        <% @tags.each do |tag| %>
          <%= tag_to_remove(tag) %>
        <% end %>
      </div>
    </section>
  <% end %>


  <div class="row">
    <div class="small-12 medium-8 large-9 columns">
      <h4><%= page_entries_info @products %></h4>
      <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">
        <% @products.each do |product| %>
          <%= render partial: "products/card", locals: { product: product } %>
        <% end %>
      </ul>

    </div>

    <div class="small-12 medium-4 large-3 columns">
      <section>
      <h4>Suchen</h4>
        <%= search_form_for @search do |f| %>
          <p>
            <%= f.label :name_cont, "Bezeichnung" %>
            <%= f.text_field :name_cont %>
          </p>

          <p>
            <%= f.label :sku_cont, "Artikelnummer" %>
            <%= f.text_field :sku_cont %>
          </p>

          <p>
            <%= f.label :description_cont, "Beschreibung" %>
            <%= f.text_field :description_cont %>
          </p>

          <p>
            <%= f.label :brand_id_eq, "Marke" %>
            <%= f.collection_select(:brand_id_eq, Brand.active.distinct, :id, :name, {prompt: "Marke auswählen..."}) %>
          </p>

          <p>
            <%= f.submit "Suchen", class: "small button expand" %>
          </p>
        <% end %>
      </section>
      <section>
        <h4>Tags</h4>
        <div id="tag-cloud">
          <% if @tags %>
            <% tag_cloud Product.tagged_with(@tags).tag_counts.order(:name), %w[xs s m l xl] do |tag, css_class| %>
              <%= tag_cloud_item(tag.name) %>
            <% end %>
          <% else %>
            <% tag_cloud Product.tag_counts.order(:name), %w[xs s m l xl] do |tag, css_class| %>
              <%= tag_cloud_item(tag.name) %>
            <% end %>
          <% end %>
        </div>
        <hr>
        <%= link_to "Filter aufheben", products_path, class: "small alert button expand" %>
      </section>
    </div>

  </div>  
</div>

<section>
  <%= paginate @products %>
</section>

<div class="row">
  <div class="small-12 columns">
    <div class="actions">
      <%= link_to "Artikel hinzufügen", new_product_path, class: "button" %>
    </div>
  </div>
</div>
